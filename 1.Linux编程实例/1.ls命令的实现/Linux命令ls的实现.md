### ls的实现

- **预计实现的功能**

> - 实现ls命令 加上参数，输出所有的文件列表，或者按行输出
>
> - 颜色在/env 的LS_COLORS里面存储ls输出的颜色
>
> - 动态调整文件大小输出宽度
>
> - 动态调整输出宽度
>
> - -a   与 -l  或者  -al  

- **相关函数功能的学习（使用man手册）**

``` shell 
$man opendir  
# 主要是为了打开目录，通过一个文件，或者文件描述符来打开文件，返回一个指针
$man readdir
# 读入一个目录，返回一个结构体指针
$man perror
# 主要是打印系统文件错误，对应不同错误都有一个错误代码，errno是一个全局变量
$man closedir
# 就是关闭文件目录指针，以及文件描述符，文件描述符就不可用
$man 2 stat
# 获取文件状态，传进文件路径，以及一个指针，包含文件各种信息
$man getpwuid
# 返回一个结构体指针，可以获得username
$man getgrgid
# 返回也是结构体指针，可以得到group结构体
$man 3 getopt
#注意对应getopt返回值，但是返回值是整形，整形与字符型也是对等的，字符型时整形提升
# 展示文件，文件选项的使用
$man scandir
#给文件进行排序
$man ioctl
#获取当前窗口信息
$man access
#判断文件是否可达
$man qsort
#对于文件按照字典序排序
$man chdir
#修改文件路径
```

- **错误输出**

>  `errno` 是一个全局的错误代码，
>
> `perror` 命令理解



- **解决过程**

> ​	**首先**要明确的是我们要实现的功能，由于经常使用ls以及相关的命令所以我们很清楚要实现什么样的功能，然后就是后续学习到的一些对于文件的操作，包括打开文件，文件的名称输出，文件权限的获取，文件的uid以及gid还有文件大小，显示的时候对应是否显示隐藏文件，文件的排序，按照不同文件显示不同的颜色，还有就是根据terminal的大小来输出不同的列数，还有就是如何去组合获取参数这是目标问题，以及软连接的输出
>
> ​	**然后**就是相关函数的学习，主要是借助man手册来获取相应的函数原型以及使用方法，再根据需求实现相关函数
>
> ​	**最后**就是写代码的时间，要使用到主函数的参数列表，所以我们要引入相应的参数列表，跟参数个数，就根据需求开始了**开心的代码之旅呢**



> ls -a -l 选项使用  getopt
>
> ls  /etc 参数处理，如果时一个文件夹还行，但是如果是一个文件怎么办，我们可以再opendir中判断是否是普通文件，如果时普通文件就直接输出
>
> stat获取文件信息